System.register("chunks:///_virtual/BaseMode.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"337322PsXFNtamE78+EhQNH","BaseMode",void 0);e("BaseMode",(function(){}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Block.ts",["cc"],(function(){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"0dc8c/dipBGEqDxUyAqbGPV","Block",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/BlockCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var c,e,l,o,r,n;return{setters:[function(t){c=t.inheritsLoose,e=t.createClass},function(t){l=t.cclegacy,o=t._decorator,r=t.Vec2,n=t.Component}],execute:function(){var i;l._RF.push({},"b9abeQoUNdB95GiGPwJ30Sc","BlockCtrl",void 0);var s=o.ccclass;t("BlockCtrl",s("BlockCtrl")(i=function(t){function l(){for(var c,e=arguments.length,l=new Array(e),o=0;o<e;o++)l[o]=arguments[o];return(c=t.call.apply(t,[this].concat(l))||this).pieceCtrls=null,c._block=null,c.offset=r.ZERO,c}return c(l,t),e(l,[{key:"block",get:function(){return this._block},set:function(t){this._block=t;for(var c=0;c<this._block.pieces.length;c++){var e=this._block.pieces[c];this.pieceCtrls[c].init(e.z)}}}]),l}(n))||i);l._RF.pop()}}}));

System.register("chunks:///_virtual/BlockFactory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockCtrl.ts","./BlockPieceCtrl.ts"],(function(e){var t,n,o,c,i,r,l,a,u,s,f,g,d;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){o=e.cclegacy,c=e._decorator,i=e.log,r=e.randomRangeInt,l=e.assetManager,a=e.instantiate,u=e.Vec2,s=e.Vec3,f=e.Component},function(e){g=e.BlockCtrl},function(e){d=e.BlockPieceCtrl}],execute:function(){var D,p;o._RF.push({},"9f5d0NUyS1Bf5M23zBlX2WQ","BlockFactory",void 0);var y=c.ccclass,h=(c.property,["O1","O4","I4","I4Deg90","L4","L4Deg90","T4","T4Deg90","O6","O6Deg90","S4","Z4","I2","I2Deg90","L3","L3Deg90","L3Deg180","L3Deg270","L4Deg180","L4Deg270","T4Deg180","T4Deg270","S4Deg90","Z4Deg90","I5","I5Deg90","L5","L5Deg90","L5Deg180","L5Deg270","O9"]);e("BlockFactory",y("BlockFactory")(((p=function(e){function o(){return e.apply(this,arguments)||this}t(o,e);var c=o.prototype;return c.onLoad=function(){o._instance=this},c.createRandomDifficulty0Block=function(e){void 0===e&&(e=null),i("创建简单方块");var t=r(0,10);return this.createDifficultyBlock(t,e)},c.createRandomDifficulty1Block=function(e){void 0===e&&(e=null),i("创建中等方块");var t=r(0,24);return this.createDifficultyBlock(t,e)},c.createRandomDifficulty2Block=function(e){void 0===e&&(e=null),i("创建复杂方块");var t=r(0,31);return this.createDifficultyBlock(t,e)},c.createDifficultyBlock=function(e,t){void 0===t&&(t=null);var n=h[e];return this.createBlock(n,t)},c.createBlock=function(e,t){void 0===t&&(t=null);var n=l.getBundle("game").get("prefab/block/"+e),o=a(n),c=o.getComponent(g),i=o.getComponentsInChildren(d);c.pieceCtrls=i;var r=i[0].node;c.offset=new u(.5*Math.round(r.position.x/29),.5*Math.round(r.position.y/29));for(var f=[],D=0;D<i.length;D++){var p=Math.round((i[D].node.position.x-r.position.x)/58),y=Math.round((i[D].node.position.y-r.position.y)/58);f.push(new s(p,y,1))}return t&&(f=this.generateRandPiece(f,t)),c.block={pieces:f},c},c.generateRandPiece=function(e,t){if(t){var n=t[r(0,t.length)],o=r(0,e.length);e[o]=new s(e[o].x,e[o].y,n)}return e},n(o,null,[{key:"instance",get:function(){return this._instance}}]),o}(f))._instance=null,D=p))||D);o._RF.pop()}}}));

System.register("chunks:///_virtual/BlockOpAreaCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts"],(function(t){var o,e,n,i,l,s,c,r,h;return{setters:[function(t){o=t.inheritsLoose,e=t.createClass},function(t){n=t.cclegacy,i=t._decorator,l=t.Vec3,s=t.Node,c=t.tween,r=t.Component},function(t){h=t.GameEvent}],execute:function(){var a;n._RF.push({},"ee1927iQT5OfrlKMA3jLJFs","BlockOpAreaCtrl",void 0);var u=i.ccclass;t("BlockOpAreaCtrl",u("BlockOpAreaCtrl")(a=function(t){function n(){for(var o,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(o=t.call.apply(t,[this].concat(n))||this)._blockCtrl=null,o}o(n,t);var i=n.prototype;return i.attachBlock=function(t){this._blockCtrl=t,this._blockCtrl.node.setParent(this.node),this.resetBlock()},i.deleteBlock=function(){null!=this._blockCtrl&&(this._blockCtrl.node.destroy(),this._blockCtrl=null)},i.resetBlock=function(){this._blockCtrl.node.position=l.ZERO,this._blockCtrl.node.scale=l.ONE},i.start=function(){this.node.on(s.EventType.TOUCH_START,this.onNodeTouchStart,this),this.node.on(s.EventType.TOUCH_MOVE,this.onNodeTouchMove,this),this.node.on(s.EventType.TOUCH_END,this.onNodeTouchEnd,this),this.node.on(s.EventType.TOUCH_CANCEL,this.onNodeTouchCancel,this)},i.onDestroy=function(){this.node.off(s.EventType.TOUCH_START,this.onNodeTouchStart,this),this.node.off(s.EventType.TOUCH_MOVE,this.onNodeTouchMove,this),this.node.off(s.EventType.TOUCH_END,this.onNodeTouchEnd,this),this.node.off(s.EventType.TOUCH_CANCEL,this.onNodeTouchCancel,this)},i.onNodeTouchStart=function(t){if(null!==this._blockCtrl){var o=c(this._blockCtrl.node).to(.03,{scale:new l(2.25,2.25,1)}),e=c(this._blockCtrl.node).by(.03,{position:new l(0,300,0)});c(this._blockCtrl.node).parallel(o,e).start()}},i.onNodeTouchMove=function(t){if(null!==this._blockCtrl){var o=this._blockCtrl.node,e=new l(o.position.x+t.getUIDelta().x,o.position.y+t.getUIDelta().y,1);o.setPosition(e),h.target.emit(h.MOVE_BLOCK,this)}},i.onNodeTouchEnd=function(t){if(null!==this._blockCtrl){var o=this._blockCtrl.node,e=new l(o.position.x+t.getUIDelta().x,o.position.y+t.getUIDelta().y,1);o.setPosition(e),h.target.emit(h.DROP_BLOCK,this)}},i.onNodeTouchCancel=function(t){if(null!==this._blockCtrl){var o=this._blockCtrl.node,e=new l(o.position.x+t.getUIDelta().x,o.position.y+t.getUIDelta().y,1);o.setPosition(e),h.target.emit(h.DROP_BLOCK,this)}},e(n,[{key:"blockCtrl",get:function(){return this._blockCtrl}},{key:"isEmpty",get:function(){return null===this._blockCtrl}}]),n}(r))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/BlockPieceCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CollectionUtils.ts"],(function(e){var t,i,r,n,o,l,c,p,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,c=e.Sprite,p=e.Component},function(e){a=e.CollectionUtils}],execute:function(){var u,s,f,y,h,C,S;o._RF.push({},"af455I9j5tNZLnyTXC61wJ5","BlockPieceCtrl",void 0);var b=l.ccclass,g=l.property;e("BlockPieceCtrl",(u=b("BlockPieceCtrl"),s=g(c),f=g(c),u((C=t((h=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,r(t,"pieceSprite",C,n(t)),r(t,"collectionSprite",S,n(t)),t}return i(t,e),t.prototype.init=function(e){this.collectionSprite.node.active=e>=10,e>=10&&(this.collectionSprite.spriteFrame=a.getCollectionSprite(e))},t}(p)).prototype,"pieceSprite",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(h.prototype,"collectionSprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=h))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/Board.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,r,t;return{setters:[function(e){n=e.createClass},function(e){r=e.cclegacy,t=e.log}],execute:function(){r._RF.push({},"48d99bVOndNA5E4E5lSoReZ","Board",void 0);e("Board",function(){var e=r.prototype;function r(){this._pieces=void 0,this._pieces=Array(8).fill(Array(8).fill(0)).map((function(e){return e.slice()}))}return e.getPiece=function(e){return this._pieces[e.r][e.c]},e.fill=function(e){var n=this;null==e||e.forEach((function(e){return n._pieces[e.r][e.c]=e.p}))},e.canFill=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(0!==this._pieces[r.r][r.c])return!1}return!0},e.clear=function(e){var n=this;null==e||e.forEach((function(e){return n._pieces[e.r][e.c]=0}))},e.canPlace=function(e){for(var n=0;n<this._pieces.length;n++)for(var r=0;r<this._pieces[n].length;r++)if(0===this._pieces[n][r]){for(var i=e.pieces,c=!0,u=0;u<i.length;u++){var o=i[u],s=n+o.y,l=r+o.x;if(s<0||s>7||l<0||l>7||0!==this._pieces[s][l]){c=!1;break}}if(c)return t("可放置位置：("+n+", "+r+"), "+e.pieces),!0}return!1},e.getCanClearPieceIndexes=function(){for(var e=this.getFilledRows(),n=this.getFilledColumns(),r=[],t=0;t<e.length;t++)for(var i=e[t],c=this._pieces[i],u=0;u<c.length;u++)r.push({r:i,c:u});for(var o=0;o<n.length;o++)for(var s=n[o],l=0;l<this._pieces.length;l++)r.push({r:l,c:s});var f=[];return r.forEach((function(e){f.find((function(n){return n.r===e.r&&n.c===e.c}))||f.push(e)})),f},e.getPreFilledPieceIndexes=function(e){for(var n=this,r=this.getFilledRows(e),t=this.getFilledColumns(e),i=[],c=function(){for(var t=r[u],c=n._pieces[t],o=function(n){null!=e&&e.find((function(e){return e.r===t&&e.c===n}))||i.push({r:t,c:n})},s=0;s<c.length;s++)o(s)},u=0;u<r.length;u++)c();for(var o=function(){for(var r=t[s],c=function(n){null!=e&&e.find((function(e){return e.r===n&&e.c===r}))||i.push({r:n,c:r})},u=0;u<n._pieces.length;u++)c(u)},s=0;s<t.length;s++)o();return i},e.getFilledRows=function(e){var n=this;void 0===e&&(e=null);for(var r=[],t=function(t){n._pieces[t].every((function(n,r){var i;return n>0||(null==(i=e)?void 0:i.find((function(e){return e.r===t&&e.c===r})))}))&&r.push(t)},i=0;i<this._pieces.length;i++)t(i);return r},e.getFilledColumns=function(e){var n=this;void 0===e&&(e=null);for(var r=[],t=function(t){n._pieces.map((function(e){return e[t]})).every((function(n,r){var i;return n>0||(null==(i=e)?void 0:i.find((function(e){return e.r===r&&e.c===t})))}))&&r.push(t)},i=0;i<this._pieces[0].length;i++)t(i);return r},n(r,[{key:"pieces",get:function(){return this._pieces}}]),r}());r._RF.pop()}}}));

System.register("chunks:///_virtual/BoardCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./BoardPieceCtrl.ts","./Board.ts"],(function(e){var t,r,n,o,i,c,s,l,a,h;return{setters:[function(e){t=e.inheritsLoose,r=e.createClass},function(e){n=e.cclegacy,o=e._decorator,i=e.UITransform,c=e.Vec2,s=e.Component},function(e){l=e.GameEvent},function(e){a=e.BoardPieceCtrl},function(e){h=e.Board}],execute:function(){var f;n._RF.push({},"fdf25ArE4BDRZgKyLUfH/oL","BoardCtrl",void 0);var u=o.ccclass;e("BoardCtrl",u("BoardCtrl")(f=function(e){function n(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).pieceCtrls=null,t._board=null,t}t(n,e);var o=n.prototype;return o.reset=function(){this._board=new h,this.pieceCtrls.forEach((function(e){return e.reset(0)}))},o.onLoad=function(){this.pieceCtrls=this.getComponentsInChildren(a)},o.start=function(){this._board=new h,l.target.on(l.MOVE_BLOCK,this.onBlockMoveEvent,this),l.target.on(l.DROP_BLOCK,this.onBlockDropEvent,this)},o.onDestroy=function(){this.node.on(l.MOVE_BLOCK,this.onBlockMoveEvent,this),this.node.on(l.DROP_BLOCK,this.onBlockDropEvent,this)},o.onBlockMoveEvent=function(e){var t=this;this.resetPieces();var r=e.blockCtrl,n=this.getCanFillPieceIndexes(r);if(n){n.forEach((function(e){return t.pieceCtrls[8*e.r+e.c].hint()}));var o=this._board.getPreFilledPieceIndexes(n);o&&o.forEach((function(e){return t.pieceCtrls[8*e.r+e.c].preFill()}))}},o.onBlockDropEvent=function(e){var t=this;this.resetPieces();var r=e.blockCtrl,n=this.getCanFillPieceIndexes(r);if(n){var o=n.map((function(e,t){var n=r.block.pieces[t].z;return{r:e.r,c:e.c,p:n}}));this._board.fill(o),e.deleteBlock(),n.forEach((function(e){var r=t._board.pieces[e.r][e.c];t.pieceCtrls[8*e.r+e.c].fill(r)})),l.target.emit(l.FILL_BLOCK,n.length);var i=this._board.getCanClearPieceIndexes();if(i.length>0){for(var c=[],s=0;s<i.length;s++){var a=i[s],h=this.pieceCtrls[8*a.r+a.c];h.clear(),c.push({index:a,piece:this.board.getPiece(a),worldPosition:h.node.worldPosition})}l.target.emit(l.CLEAR_PIECES,c),this._board.clear(i)}l.target.emit(l.CHECK_PLACEMENT)}else e.resetBlock()},o.resetPieces=function(){for(var e=this._board.pieces,t=0;t<e.length;t++)for(var r=0;r<e[t].length;r++){var n=e[t][r];this.pieceCtrls[8*t+r].reset(n)}},o.getCanFillPieceIndexes=function(e){for(var t=this.node.getComponent(i),r=t.convertToNodeSpaceAR(e.node.worldPosition),n=r.x+t.width/2,o=r.y+t.height/2,s=new c(n+e.offset.x*a.PIECE_SIZE,o+e.offset.y*a.PIECE_SIZE),l=[],h=e.block.pieces,f=0;f<h.length;f++){var u=h[f],d=new c(s.x+u.x*a.PIECE_SIZE,s.y+u.y*a.PIECE_SIZE);if(d.x<0||d.x>t.width||d.y<0||d.y>t.height)return null;var C=Math.floor(d.y/a.PIECE_SIZE),E=Math.floor(d.x/a.PIECE_SIZE);if(C<0||C>7||E<0||E>7)return null;l.push({r:C,c:E})}return this._board.canFill(l)?l:null},r(n,[{key:"board",get:function(){return this._board}}]),n}(s))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/BoardPieceCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CollectionUtils.ts"],(function(e){var i,t,o,r,n,c,l,p,a,s,u,f,d,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,c=e._decorator,l=e.Sprite,p=e.Node,a=e.Color,s=e.tween,u=e.Vec3,f=e.Quat,d=e.Component},function(e){h=e.CollectionUtils}],execute:function(){var S,v,y,C,b,g,w,N,m,P;n._RF.push({},"ca1291oJ3ZH9IrQh5qEAXFJ","BoardPieceCtrl",void 0);var E=c.ccclass,F=c.property;e("BoardPieceCtrl",(S=E("BoardPieceCtrl"),v=F(l),y=F(l),C=F(p),S(((P=function(e){function i(){for(var i,t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return i=e.call.apply(e,[this].concat(n))||this,o(i,"pieceSprite",w,r(i)),o(i,"collectionSprite",N,r(i)),o(i,"prefillNode",m,r(i)),i}t(i,e);var n=i.prototype;return n.onLoad=function(){this.pieceSprite.node.active=!1,this.collectionSprite.node.active=!1,this.prefillNode.active=!1},n.reset=function(e){this.pieceSprite.node.active=e>0,this.collectionSprite.node.active=e>=10,e>=10&&(this.collectionSprite.spriteFrame=h.getCollectionSprite(e)),this.prefillNode.active=!1},n.hint=function(){this.pieceSprite.node.active=!0,this.pieceSprite.color=new a(255,255,255,50)},n.preFill=function(){this.prefillNode.active=!0},n.fill=function(e){this.pieceSprite.node.active=!0,this.pieceSprite.color=new a(255,255,255,255),this.collectionSprite.node.active=e>=10,e>=10&&(this.collectionSprite.spriteFrame=h.getCollectionSprite(e))},n.clear=function(){var e=this;s(this.pieceSprite.node).call((function(){e.collectionSprite.node.active=!1})).to(.1,{scale:new u(.5,.5,1)}).to(.1,{angle:45}).call((function(){e.pieceSprite.node.scale=u.ONE,e.pieceSprite.node.rotation=f.IDENTITY,e.pieceSprite.node.active=!1})).start()},i}(d)).PIECE_SIZE=130,w=i((g=P).prototype,"pieceSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(g.prototype,"collectionSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(g.prototype,"prefillNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=g))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/ClassicGameOverPanelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts"],(function(e){var t,r,n,a,i,o,l,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.Label,c=e.Component},function(e){s=e.GameEvent}],execute:function(){var u,p,b,v,f,h,g;i._RF.push({},"a6eac6c9PNNupnDE2VpnDPp","ClassicGameOverPanelCtrl",void 0);var m=o.ccclass,y=o.property;e("ClassicGameOverPanelCtrl",(u=m("ClassicGameOverPanelCtrl"),p=y(l),b=y(l),u((h=t((f=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"scoreLabel",h,a(t)),n(t,"bestScoreLabel",g,a(t)),t}r(t,e);var i=t.prototype;return i.onLoad=function(){this.node.active=!1},i.show=function(e){this.node.active=!0,this.scoreLabel.string=""+e;var t=localStorage.getItem("best_score");this.bestScoreLabel.string=t},i.onPlayAgainButtonClicked=function(){this.node.active=!1,s.target.emit(s.PLAY_AGAIN)},t}(c)).prototype,"scoreLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(f.prototype,"bestScoreLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=f))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/ClassicMode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseMode.ts","./ClassicTargetUICtrl.ts","./BlockFactory.ts"],(function(t){var e,c,n,r,s,a,o,i;return{setters:[function(t){e=t.createClass,c=t.inheritsLoose},function(t){n=t.cclegacy,r=t.assetManager,s=t.instantiate},function(t){a=t.BaseMode},function(t){o=t.ClassicTargetUICtrl},function(t){i=t.BlockFactory}],execute:function(){n._RF.push({},"7cb2eVmIM5NKIi7mqxZlRK7","ClassicMode",void 0);var u=t("ClassicTarget",function(){function t(){this._score=0}var c=t.prototype;return c.add=function(t){this._score+=t},c.reset=function(){this._score=0},e(t,[{key:"score",get:function(){return this._score}}]),t}());t("ClassicMode",function(t){function e(){var e;return(e=t.call(this)||this)._target=null,e._target=new u,e}c(e,t);var n=e.prototype;return n.createBlock=function(){return this._target.score<1e3?i.instance.createRandomDifficulty0Block():this._target.score<3e3?i.instance.createRandomDifficulty1Block():i.instance.createRandomDifficulty2Block()},n.createGameUI=function(){var t=r.getBundle("game"),e=s(t.get("prefab/ClassicTargetUI"));return e.getComponent(o).target=this._target,e},e}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/ClassicTargetUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ScoreViewCtrl.ts","./GameEvent.ts","./ClassicGameOverPanelCtrl.ts"],(function(t){var e,r,n,i,a,o,s,l,c,g,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.log,l=t.Component},function(t){c=t.ScoreViewCtrl},function(t){g=t.GameEvent},function(t){u=t.ClassicGameOverPanelCtrl}],execute:function(){var h,v,f,C,p,E,m;a._RF.push({},"a97f15TmuJMyY8QYJnGk0lB","ClassicTargetUICtrl",void 0);var P=o.ccclass,y=o.property;t("ClassicTargetUICtrl",(h=P("ClassicTargetUICtrl"),v=y(c),f=y(u),h((E=e((p=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"scoreViewCtrl",E,i(e)),n(e,"gameOverPanelCtrl",m,i(e)),e.target=void 0,e}r(e,t);var a=e.prototype;return a.start=function(){g.target.on(g.FILL_BLOCK,this.onFillBlockEvent,this),g.target.on(g.CLEAR_PIECES,this.onClearPiecesEvent,this),g.target.on(g.GAME_OVER,this.onGameOverEvent,this),g.target.on(g.PLAY_AGAIN,this.onPlayAgainEvent,this)},a.onDestroy=function(){g.target.off(g.FILL_BLOCK,this.onFillBlockEvent),g.target.off(g.CLEAR_PIECES,this.onClearPiecesEvent),g.target.off(g.GAME_OVER,this.onGameOverEvent,this),g.target.off(g.PLAY_AGAIN,this.onPlayAgainEvent,this)},a.onFillBlockEvent=function(t){this.target.add(t),this.updateScore()},a.onClearPiecesEvent=function(t){var e=t.length;this.target.add(e),this.updateScore()},a.onGameOverEvent=function(){var t=0;localStorage.getItem("best_score")&&(t=parseInt(localStorage.getItem("best_score"))),t<this.target.score&&localStorage.setItem("best_score",""+this.target.score),s(t+", "+this.target.score),this.gameOverPanelCtrl.show(this.target.score)},a.onPlayAgainEvent=function(){this.target.reset(),this.updateScore()},a.updateScore=function(){this.scoreViewCtrl.setScore(this.target.score)},e}(l)).prototype,"scoreViewCtrl",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(p.prototype,"gameOverPanelCtrl",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=p))||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/ClearedPiece.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"9e2fc5oCKxPA7TCPmZgfkD0","ClearedPiece",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/CollectionGameOverPanelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CollectionTargetItemCtrl.ts","./GameEvent.ts"],(function(e){var t,n,r,o,i,a,l,c,s,u,f,p,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,l=e._decorator,c=e.Node,s=e.assetManager,u=e.instantiate,f=e.Component},function(e){p=e.CollectionTargetItemCtrl},function(e){v=e.GameEvent}],execute:function(){var d,C,m,g,h;a._RF.push({},"ff68dEld/RJyb+jsq9Hfej1","CollectionGameOverPanelCtrl",void 0);var y=l.ccclass,P=l.property;e("CollectionGameOverPanelCtrl",(d=y("CollectionGameOverPanelCtrl"),C=P(c),d((h=t((g=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"container",h,o(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.node.active=!1},a.show=function(e){this.node.active=!0,this.container.destroyAllChildren();for(var t,n=s.getBundle("game"),r=i(e);!(t=r()).done;){var o=t.value,a=o[0],l=o[1],c=n.get("prefab/CollectionTargetItem"),f=u(c);f.setParent(this.container),f.getComponent(p).init(a,l)}},a.onRetryButtonClicked=function(){this.node.active=!1,v.target.emit(v.PLAY_AGAIN)},t}(f)).prototype,"container",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=g))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/CollectionGameResultPanelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CollectionTargetItemCtrl.ts"],(function(e){var t,n,o,r,i,a,l,c,s,u,p,f,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,l=e._decorator,c=e.Node,s=e.assetManager,u=e.instantiate,p=e.director,f=e.Component},function(e){C=e.CollectionTargetItemCtrl}],execute:function(){var d,g,h,m,v;a._RF.push({},"07086eju2RBKq05n04ncjyJ","CollectionGameResultPanelCtrl",void 0);var y=l.ccclass,P=l.property;e("CollectionGameResultPanelCtrl",(d=y("CollectionGameResultPanelCtrl"),g=P(c),d((v=t((m=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,o(t,"container",v,r(t)),t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.node.active=!1},a.show=function(e){this.node.active=!0,this.container.destroyAllChildren();for(var t,n=s.getBundle("game"),o=i(e);!(t=o()).done;){var r=t.value,a=r[0],l=r[1],c=n.get("prefab/CollectionTargetItem"),p=u(c);p.setParent(this.container),p.getComponent(C).init(a,l)}},a.onBackButtonClicked=function(){p.loadScene("main")},t}(f)).prototype,"container",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=m))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/CollectionMode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseMode.ts","./CollectionTargetUICtrl.ts","./BlockFactory.ts"],(function(t){var e,n,o,r,l,i,c,a,s,u,f;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,n=t.createClass,o=t.inheritsLoose},function(t){r=t.cclegacy,l=t.randomRangeInt,i=t.log,c=t.assetManager,a=t.instantiate},function(t){s=t.BaseMode},function(t){u=t.CollectionTargetUICtrl},function(t){f=t.BlockFactory}],execute:function(){r._RF.push({},"7f063mxVuJON4H8PXnBQ84T","CollectionMode",void 0);var g=t("CollectionTarget",function(){function t(t){this._targetCollections=null,this._leftCollections=null,this._targetCollections=t,this._leftCollections=new Map(t)}var o=t.prototype;return o.getTarget=function(t){return this._leftCollections.get(t)},o.collect=function(t,e){var n=Math.max(this._leftCollections.get(t)-e,0);this._leftCollections.set(t,n)},o.hasFinished=function(){for(var t,n=e(this._leftCollections);!(t=n()).done;){var o=t.value;o[0];if(o[1]>0)return!1}return!0},o.reset=function(){this._leftCollections=new Map(this.targetCollections)},n(t,[{key:"targetCollections",get:function(){return this._targetCollections}},{key:"leftCollections",get:function(){return this._leftCollections}}]),t}());t("CollectionMode",function(t){function e(e){var n;return(n=t.call(this)||this)._target=null,n._target=new g(e),n}o(e,t);var n=e.prototype;return n.createBlock=function(){var t=Array.from(this._target.leftCollections).filter((function(t){t[0];return t[1]>0})).map((function(t){var e=t[0];t[1];return e}));l(0,10)<3&&(t=null),i("randPieces: "+t);var e=Array.from(this._target.targetCollections.values()).reduce((function(t,e){return t+e}),0),n=Array.from(this._target.leftCollections.values()).reduce((function(t,e){return t+e}),0);return i(n+" - "+e),n>.8*e?f.instance.createRandomDifficulty0Block(t):n>.3*e?f.instance.createRandomDifficulty1Block(t):f.instance.createRandomDifficulty2Block(t)},n.createGameUI=function(){var t=c.getBundle("game"),e=a(t.get("prefab/CollectionTargetUI"));return e.getComponent(u).target=this._target,e},e}(s));r._RF.pop()}}}));

System.register("chunks:///_virtual/CollectionTargetItemCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CollectionUtils.ts"],(function(t){var e,n,i,o,r,l,c,a,u,s,p,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,c=t.Sprite,a=t.Label,u=t.Node,s=t.tween,p=t.Vec3,f=t.Component},function(t){d=t.CollectionUtils}],execute:function(){var b,g,h,C,y,m,v,L,S;r._RF.push({},"af434r6qStM8qBJQf0Tu5BE","CollectionTargetItemCtrl",void 0);var w=l.ccclass,N=l.property;t("CollectionTargetItemCtrl",(b=w("CollectionTargetItemCtrl"),g=N(c),h=N(a),C=N(u),b((v=e((m=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,i(e,"collectionSprite",v,o(e)),i(e,"countLabel",L,o(e)),i(e,"doneNode",S,o(e)),e}n(e,t);var r=e.prototype;return r.onLoad=function(){this.doneNode.active=!1},r.init=function(t,e){this.collectionSprite.spriteFrame=d.getCollectionSprite(t),this.countLabel.string=""+e},r.setCount=function(t){s(this.collectionSprite.node).to(.2,{scale:new p(1.5,1.5,1)},{easing:"quadOut"}).to(.4,{scale:p.ONE},{easing:"quadOut"}).start(),0===t?(this.countLabel.node.active=!1,this.doneNode.active=!0):this.countLabel.string=""+t},e}(f)).prototype,"collectionSprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(m.prototype,"countLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(m.prototype,"doneNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=m))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/CollectionTargetUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./CollectionUtils.ts","./CollectionTargetItemCtrl.ts","./CollectionGameOverPanelCtrl.ts","./CollectionGameResultPanelCtrl.ts"],(function(t){var e,n,o,l,r,i,a,c,s,u,g,C,f,p,m,v,h,P,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,l=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy,a=t._decorator,c=t.Node,s=t.assetManager,u=t.instantiate,g=t.Component,C=t.UITransform,f=t.Vec3,p=t.tween},function(t){m=t.GameEvent},function(t){v=t.CollectionUtils},function(t){h=t.CollectionTargetItemCtrl},function(t){P=t.CollectionGameOverPanelCtrl},function(t){A=t.CollectionGameResultPanelCtrl}],execute:function(){var d,E,I,b,y,T,w,O,_,G,R;i._RF.push({},"6239aOCpw1N9pdLO6W00dS/","CollectionTargetUICtrl",void 0);var L=a.ccclass,S=a.property;t("CollectionTargetUICtrl",(d=L("CollectionTargetUICtrl"),E=S(c),I=S(c),b=S(P),y=S(A),d((O=e((w=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r))||this,o(e,"collectionAnimArea",O,l(e)),o(e,"container",_,l(e)),o(e,"gameOverPanelCtrl",G,l(e)),o(e,"gameResultPanelCtrl",R,l(e)),e.target=null,e._collectionTargetItemCtrls=null,e}n(e,t);var i=e.prototype;return i.start=function(){m.target.on(m.CLEAR_PIECES,this.onClearPiecesEvent,this),m.target.on(m.GAME_OVER,this.onGameOverEvent,this),m.target.on(m.PLAY_AGAIN,this.onPlayAgainEvent,this),this._collectionTargetItemCtrls=new Map;for(var t,e=s.getBundle("game"),n=r(this.target.leftCollections);!(t=n()).done;){var o=t.value,l=o[0],i=o[1],a=e.get("prefab/CollectionTargetItem"),c=u(a);c.setParent(this.container);var g=c.getComponent(h);g.init(l,i),this._collectionTargetItemCtrls.set(l,g)}},i.onDestroy=function(){m.target.off(m.CLEAR_PIECES,this.onClearPiecesEvent,this),m.target.off(m.GAME_OVER,this.onGameOverEvent,this),m.target.off(m.PLAY_AGAIN,this.onPlayAgainEvent,this)},i.onClearPiecesEvent=function(t){for(var e=this,n=function(){var n=t[o],l=n.piece,r=n.worldPosition,i=e.collectionAnimArea.getComponent(C),a=i.convertToNodeSpaceAR(r);if(l>=10){e.target.collect(l,1);var c=v.getCollection(l);c.setParent(e.collectionAnimArea);var s=i.convertToNodeSpaceAR(e._collectionTargetItemCtrls.get(l).node.worldPosition),u=f.add(new f,a,f.multiplyScalar(new f,f.subtract(new f,a,s),.3));p(c).call((function(){c.setPosition(a)})).to(.4,{scale:new f(1.6,1.6,1)},{easing:"backOut"}).to(.15,{scale:new f(1.4,1.4,1)}).to(.2,{position:u},{easing:"cubicOut"}).to(.45,{position:s},{easing:"cubicIn"}).call((function(){c.destroy(),e.updateCollection(l)})).start()}},o=0;o<t.length;o++)n();this.target.hasFinished()&&setTimeout((function(){e.gameResultPanelCtrl.show(e.target.targetCollections)}),2500)},i.onGameOverEvent=function(){this.gameOverPanelCtrl.show(this.target.leftCollections)},i.onPlayAgainEvent=function(){this.target.reset();for(var t,e=r(this.target.leftCollections);!(t=e()).done;){var n=t.value[0];this.updateCollection(n)}},i.updateCollection=function(t){this._collectionTargetItemCtrls.get(t).setCount(this.target.getTarget(t))},e}(g)).prototype,"collectionAnimArea",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(w.prototype,"container",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(w.prototype,"gameOverPanelCtrl",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(w.prototype,"gameResultPanelCtrl",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=w))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/CollectionUtils.ts",["cc"],(function(e){var t,n,o,c;return{setters:[function(e){t=e.cclegacy,n=e.assetManager,o=e.SpriteFrame,c=e.instantiate}],execute:function(){t._RF.push({},"cfb690ZAENJJY/YE6Yqx+VZ","CollectionUtils",void 0);var l=["collection-4edge","collection-5edge","collection-8corner"],i=["Collection4Edge","Collection5Edge","Collection8Corner"];e("CollectionUtils",function(){function e(){}return e.getCollectionSprite=function(e){var t=Math.floor(e/10)-1,c=n.getBundle("game").get("texture/"+l[t]);return o.createWithImage(c)},e.getCollection=function(e){var t=Math.floor(e/10)-1,o=n.getBundle("game").get("prefab/"+i[t]);return c(o)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["cc"],(function(E){var e,t;return{setters:[function(E){e=E.cclegacy,t=E.EventTarget}],execute:function(){e._RF.push({},"8d3f37skT9FkILc0teN7YdK","GameEvent",void 0);var L=E("GameEvent",(function(){}));L.MOVE_BLOCK="MOVE_BLOCK",L.DROP_BLOCK="DROP_BLOCK",L.FILL_BLOCK="FILL_BLOCK",L.CLEAR_PIECES="CLEAR_PIECES",L.CHECK_PLACEMENT="CHECK_PLACEMENT",L.GAME_OVER="GAME_OVER",L.PLAY_AGAIN="PLAY_AGAIN",L.target=new t,e._RF.pop()}}}));

System.register("chunks:///_virtual/GameScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BlockOpAreaCtrl.ts","./GameEvent.ts","./BoardCtrl.ts","./ReviveUICtrl.ts","./BlockFactory.ts"],(function(t){var e,r,n,o,i,a,l,c,s,u,f,h,C,p,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,l=t.Node,c=t.log,s=t.director,u=t.Component},function(t){f=t.BlockOpAreaCtrl},function(t){h=t.GameEvent},function(t){C=t.BoardCtrl},function(t){p=t.ReviveUICtrl},function(t){v=t.BlockFactory}],execute:function(){var k,b,E,g,A,B,m,d,y,O,I;i._RF.push({},"bcb09OuLtpOn4i9ZEhahYYN","GameScene",void 0);var P=a.ccclass,L=a.property;t("GameScene",(k=P("GameScene"),b=L(C),E=L(p),g=L(l),A=L([f]),k((d=e((m=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,n(e,"boardCtrl",d,o(e)),n(e,"reviveUICtrl",y,o(e)),n(e,"targetUIContainer",O,o(e)),n(e,"blockOpAreaCtrls",I,o(e)),e.mode=null,e}r(e,t);var i=e.prototype;return i.start=function(){h.target.on(h.FILL_BLOCK,this.onFillBlockEvent,this),h.target.on(h.CHECK_PLACEMENT,this.onCheckPlacementEvent,this),h.target.on(h.PLAY_AGAIN,this.onPlayAgainEvent,this),this.mode.createGameUI().setParent(this.targetUIContainer),this.createBlocks()},i.onDestroy=function(){h.target.off(h.FILL_BLOCK,this.onFillBlockEvent,this),h.target.off(h.CHECK_PLACEMENT,this.onCheckPlacementEvent,this),h.target.off(h.PLAY_AGAIN,this.onPlayAgainEvent,this)},i.onFillBlockEvent=function(){for(var t=0;t<this.blockOpAreaCtrls.length;t++)if(!this.blockOpAreaCtrls[t].isEmpty)return;this.createBlocks()},i.onCheckPlacementEvent=function(){for(var t=this,e=0;e<this.blockOpAreaCtrls.length;e++){var r=this.blockOpAreaCtrls[e];if(!r.isEmpty&&this.boardCtrl.board.canPlace(r.blockCtrl.block))return void c("有可放置空间，可以继续游戏")}this.reviveUICtrl.show((function(){h.target.emit(h.GAME_OVER)}),(function(){t.revive()}))},i.onPlayAgainEvent=function(){this.boardCtrl.reset(),this.blockOpAreaCtrls.forEach((function(t){return t.deleteBlock()})),this.createBlocks()},i.onBackButtonClicked=function(){s.loadScene("main")},i.createBlocks=function(){var t=this;this.blockOpAreaCtrls.forEach((function(e){e.attachBlock(t.mode.createBlock())}))},i.revive=function(){this.blockOpAreaCtrls.forEach((function(t){t.deleteBlock();var e=v.instance.createDifficultyBlock(0);t.attachBlock(e)}))},e}(u)).prototype,"boardCtrl",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(m.prototype,"reviveUICtrl",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(m.prototype,"targetUIContainer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(m.prototype,"blockOpAreaCtrls",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=m))||B));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./GameEvent.ts","./GameScene.ts","./BlockCtrl.ts","./BlockOpAreaCtrl.ts","./BlockPieceCtrl.ts","./BoardCtrl.ts","./BoardPieceCtrl.ts","./ClassicGameOverPanelCtrl.ts","./ClassicTargetUICtrl.ts","./CollectionGameOverPanelCtrl.ts","./CollectionGameResultPanelCtrl.ts","./CollectionTargetItemCtrl.ts","./CollectionTargetUICtrl.ts","./ReviveUICtrl.ts","./ScoreGameOverPanelCtrl.ts","./ScoreGameResultPanelCtrl.ts","./ScoreTargetUICtrl.ts","./ScoreViewCtrl.ts","./BaseMode.ts","./ClassicMode.ts","./CollectionMode.ts","./ScoreMode.ts","./Block.ts","./Board.ts","./ClearedPiece.ts","./Piece.ts","./PieceIndex.ts","./BlockFactory.ts","./CollectionUtils.ts","./MainScene.ts","./StartScene.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameScene.ts","./ClassicMode.ts","./ScoreMode.ts","./CollectionMode.ts"],(function(e){var n,t,o,c,i,a,s,r,u,l,d;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,c=e.randomRangeInt,i=e.director,a=e.find,s=e.Component},function(e){r=e.GameScene},function(e){u=e.ClassicMode},function(e){l=e.ScoreMode},function(e){d=e.CollectionMode}],execute:function(){var f;t._RF.push({},"a60075QTLZFHJkVb7XCDzbr","MainScene",void 0);var M=o.ccclass;o.property,e("MainScene",M("MainScene")(f=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var o=t.prototype;return o.onClassicModeButtonClicked=function(){this.startGame(new u)},o.onScoreModeButtonClicked=function(){this.startGame(new l(10*c(40,80)))},o.onCollectionModeButtonClicked=function(){var e=new Map,n=c(10,20);e.set(10,n),e.set(20,n),e.set(30,n),this.startGame(new d(e))},o.startGame=function(e){i.loadScene("game",(function(){a("Game").getComponent(r).mode=e}))},t}(s))||f);t._RF.pop()}}}));

System.register("chunks:///_virtual/Piece.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"c79d89vafxLTaM3yAD9DMay","Piece",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/PieceIndex.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"7956aQMWFdHZKfZv1Ei9evy","PieceIndex",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ReviveUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,o,e,i,l,c,r,a,u;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,e=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){l=n.cclegacy,c=n._decorator,r=n.ProgressBar,a=n.Label,u=n.Component}],execute:function(){var s,h,d,v,w,b,p;l._RF.push({},"43c27GQLz1DSrWWu6iwj+gG","ReviveUICtrl",void 0);var C=c.ccclass,_=c.property;n("ReviveUICtrl",(s=C("ReviveUICtrl"),h=_(r),d=_(a),s((b=t((w=function(n){function t(){for(var t,o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];return t=n.call.apply(n,[this].concat(l))||this,e(t,"countdownProgressBar",b,i(t)),e(t,"countdownLabel",p,i(t)),t._countdown=void 0,t._onCountdonwCallback=null,t._onReviveCallback=null,t}o(t,n);var l=t.prototype;return l.onLoad=function(){this.node.active=!1},l.show=function(n,t){this._onCountdonwCallback=n,this._onReviveCallback=t,this.node.active=!0,this._countdown=3,this.schedule(this.countdownCallback,.01)},l.countdownCallback=function(){var n;(this._countdown=Math.max(this._countdown-.01,0),this.countdownLabel.string=""+Math.ceil(this._countdown),this.countdownProgressBar.progress=this._countdown/3,0===this._countdown)&&(this.unschedule(this.countdownCallback),this.node.active=!1,null==(n=this._onCountdonwCallback)||n.call(this))},l.onReviveButtonClicked=function(){var n;this.unschedule(this.countdownCallback),this.node.active=!1,null==(n=this._onReviveCallback)||n.call(this)},t}(u)).prototype,"countdownProgressBar",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=t(w.prototype,"countdownLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=w))||v));l._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreGameOverPanelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts"],(function(e){var r,t,n,o,i,a,l,c,s,u;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.ProgressBar,c=e.Label,s=e.Component},function(e){u=e.GameEvent}],execute:function(){var p,f,g,b,v,h,y,m,L;i._RF.push({},"05682PivFVMJoftzrpPKxyp","ScoreGameOverPanelCtrl",void 0);var d=a.ccclass,P=a.property;e("ScoreGameOverPanelCtrl",(p=d("ScoreGameOverPanelCtrl"),f=P(l),g=P(c),b=P(c),p((y=r((h=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return r=e.call.apply(e,[this].concat(i))||this,n(r,"progressBar",y,o(r)),n(r,"scoreLabel",m,o(r)),n(r,"targetScoreLabel",L,o(r)),r}t(r,e);var i=r.prototype;return i.onLoad=function(){this.node.active=!1},i.show=function(e,r){this.node.active=!0,this.progressBar.progress=e/r,this.scoreLabel.string=""+e,this.targetScoreLabel.string=""+r},i.onRetryButtonClicked=function(){this.node.active=!1,u.target.emit(u.PLAY_AGAIN)},r}(s)).prototype,"progressBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=r(h.prototype,"scoreLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=r(h.prototype,"targetScoreLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=h))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreGameResultPanelCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,o,i,a,c,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,c=e.Label,l=e.director,s=e.Component}],execute:function(){var u,p,f,d,h;i._RF.push({},"eb48e7CCOJPm6L/XeRN8SCj","ScoreGameResultPanelCtrl",void 0);var b=a.ccclass,m=a.property;e("ScoreGameResultPanelCtrl",(u=b("ScoreGameResultPanelCtrl"),p=m(c),u((h=t((d=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,n(t,"scoreLabel",h,o(t)),t}r(t,e);var i=t.prototype;return i.onLoad=function(){this.node.active=!1},i.show=function(e){this.node.active=!0,this.scoreLabel.string=""+e},i.onBackButtonClicked=function(){l.loadScene("main")},t}(s)).prototype,"scoreLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreMode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseMode.ts","./ScoreTargetUICtrl.ts","./BlockFactory.ts"],(function(t){var e,r,o,c,n,a,i,s,u;return{setters:[function(t){e=t.createClass,r=t.inheritsLoose},function(t){o=t.cclegacy,c=t.log,n=t.assetManager,a=t.instantiate},function(t){i=t.BaseMode},function(t){s=t.ScoreTargetUICtrl},function(t){u=t.BlockFactory}],execute:function(){o._RF.push({},"a60c6sRn/pCQrGYFhuHqNiv","ScoreMode",void 0);var g=t("ScoreTarget",function(){function t(t){this._targetScore=0,this._score=0,this._targetScore=t}var r=t.prototype;return r.add=function(t){this._score+=t},r.hasFinished=function(){return c(this._score+", "+this._targetScore),this._score>=this._targetScore},r.reset=function(){this._score=0},e(t,[{key:"targetScore",get:function(){return this._targetScore}},{key:"score",get:function(){return this._score}}]),t}());t("ScoreMode",function(t){function e(e){var r;return(r=t.call(this)||this)._target=null,r._target=new g(e),r}r(e,t);var o=e.prototype;return o.createBlock=function(){return this._target.score<.3*this._target.targetScore?u.instance.createRandomDifficulty0Block():this._target.score<.7*this._target.targetScore?u.instance.createRandomDifficulty1Block():u.instance.createRandomDifficulty2Block()},o.createGameUI=function(){var t=n.getBundle("game"),e=a(t.get("prefab/ScoreTargetUI"));return e.getComponent(s).target=this._target,e},e}(i));o._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreTargetUICtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./ScoreGameOverPanelCtrl.ts","./ScoreGameResultPanelCtrl.ts"],(function(t){var e,r,n,i,a,o,s,l,c,u,h,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,s=t.ProgressBar,l=t.Label,c=t.Component},function(t){u=t.GameEvent},function(t){h=t.ScoreGameOverPanelCtrl},function(t){g=t.ScoreGameResultPanelCtrl}],execute:function(){var f,p,v,E,P,m,S,C,b,d,y;a._RF.push({},"bd939Bs2x1GlJTYYe2gSSdb","ScoreTargetUICtrl",void 0);var A=o.ccclass,G=o.property;t("ScoreTargetUICtrl",(f=A("ScoreTargetUICtrl"),p=G(s),v=G(l),E=G(h),P=G(g),f((C=e((S=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"progressBar",C,i(e)),n(e,"label",b,i(e)),n(e,"gameOverPanelCtrl",d,i(e)),n(e,"gameResultPanel",y,i(e)),e.target=null,e}r(e,t);var a=e.prototype;return a.start=function(){u.target.on(u.FILL_BLOCK,this.onFillBlockEvent,this),u.target.on(u.CLEAR_PIECES,this.onClearPiecesEvent,this),u.target.on(u.GAME_OVER,this.onGameOverEvent,this),u.target.on(u.PLAY_AGAIN,this.onPlayAgainEvent,this),this.updateScore()},a.onDestroy=function(){u.target.off(u.FILL_BLOCK,this.onFillBlockEvent,this),u.target.off(u.CLEAR_PIECES,this.onClearPiecesEvent,this),u.target.off(u.GAME_OVER,this.onGameOverEvent,this),u.target.off(u.PLAY_AGAIN,this.onPlayAgainEvent,this)},a.onFillBlockEvent=function(t){this.target.add(t),this.updateScore(),this.checkFinish()},a.onClearPiecesEvent=function(t){var e=t.length;this.target.add(e),this.updateScore(),this.checkFinish()},a.onGameOverEvent=function(){this.gameOverPanelCtrl.show(this.target.score,this.target.targetScore)},a.onPlayAgainEvent=function(){this.target.reset(),this.updateScore()},a.updateScore=function(){this.label.string=this.target.score+"/"+this.target.targetScore,this.progressBar.progress=this.target.score/this.target.targetScore},a.checkFinish=function(){var t=this;this.target.hasFinished()&&setTimeout((function(){t.gameResultPanel.show(t.target.targetScore)}),2500)},e}(c)).prototype,"progressBar",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(S.prototype,"label",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=e(S.prototype,"gameOverPanelCtrl",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(S.prototype,"gameResultPanel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=S))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/ScoreViewCtrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,c,i,o,n,s,a;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,c=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,n=e._decorator,s=e.Label,a=e.Component}],execute:function(){var u,l,h,S,p;o._RF.push({},"f6fdfbQv/tPYaE9sToROtRu","ScoreViewCtrl",void 0);var f=n.ccclass,_=n.property;e("ScoreViewCtrl",(u=f("ScoreViewCtrl"),l=_(s),u((p=r((S=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return r=e.call.apply(e,[this].concat(o))||this,c(r,"scoreLabel",p,i(r)),r._currentScore=0,r._targetScore=0,r}t(r,e);var o=r.prototype;return o.setScore=function(e){this._targetScore=e,this.unschedule(this.increaseScore),this.schedule(this.increaseScore,.01)},o.increaseScore=function(){this._currentScore<this._targetScore-1?this._currentScore+=1:(this._currentScore=this._targetScore,this.unschedule(this.increaseScore)),this.scoreLabel.string=""+this._currentScore},r}(a)).prototype,"scoreLabel",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=S))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/StartScene.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,o,c,a,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.assetManager,c=t.log,a=t.director,i=t.Component}],execute:function(){var u;n._RF.push({},"8c48b4zSEJEmbmhY/viT1RE","StartScene",void 0);var s=r.ccclass;r.property,t("StartScene",s("StartScene")(u=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.start=function(){o.loadBundle("game",(function(t,e){e.loadDir("./",(function(t,e){t?c("加载 game 目录失败："+t):a.loadScene("main")}))}))},n}(i))||u);n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});